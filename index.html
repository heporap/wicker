<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Wicker by heporap</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Wicker</h1>
        <p>Javascript AMD loader</p>
        <p class="view"><a href="https://github.com/heporap/wicker">View the Project on GitHub <small>heporap/wicker</small></a></p>
        <ul>
          <li><a href="https://github.com/heporap/wicker/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/heporap/wicker/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/heporap/wicker">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="wickerjs" class="anchor" href="#wickerjs"><span class="octicon octicon-link"></span></a>Wicker.js</h1>

<p>Javascript Module Loader<br>
AMD互換のdefine、requireの他、独自機能によりAMDに対応していないjQueryプラグインや、グローバル関数で定義されるライブラリをAMDのように扱う事が可能です。</p>

<h1></h1>

<h2>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h2>

<p>Wicker.js は "wicker" namespace を使用します。</p>

<ul>
<li>
<a href="#wickerfactoryname-depends-constructor">wicker.factory()</a> … モジュールを定義。AMDのdefineに相当。</li>
<li>
<a href="#wickercarriageurl-baseurl">wicker.carriage()</a> … モジュールファイルをロード。require.jsのrequire.configに相当。</li>
<li>
<a href="#wickerconfigname-props">wicker.config()</a> … モジュールのコンフィギュレーションを行います。初期設定値などを指定したい時に。</li>
<li>
<a href="#defineid-depends-constructor">define()</a> … AMDのdefineと同等。</li>
<li>
<a href="#requiredepends-controller">require()</a> … define()へのエイリアス。</li>
<li>
<a href="#dabexportsid">dab.exports()</a> … namespaceをグローバル関数にエクスポートします。</li>
</ul><h1></h1>

<h3>
<a name="wickerfactoryname-depends-constructor" class="anchor" href="#wickerfactoryname-depends-constructor"><span class="octicon octicon-link"></span></a>wicker.factory(name, depends, constructor)</h3>

<p>モジュールを定義します。</p>

<ul>
<li>name: String <em>省略可</em><br>
モジュール名</li>
<li>depends: Array  <em>省略可</em><br>
関連するモジュール名<br>
省略した場合は["require", "exports", "module"]と見なします。</li>
<li>constructor: Function <em>定義の場合は必須</em><br>
モジュールのコンストラクタ<br>
関連モジュールのロードが完了したら呼び出されます。
引数: 関連モジュール</li>
</ul><h4>
<a name="%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E7%94%A8%E6%B3%95" class="anchor" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E7%94%A8%E6%B3%95"><span class="octicon octicon-link"></span></a>基本的な用法</h4>

<pre><code>wicker.factory("mymodule", ["jquery"], function($){
    // define your module here


    // return accessor for this module
    return {
      version: "1.0"
    };
});
</code></pre>

<p>モジュール名<code>"require"</code>、<code>"exports"</code>、<code>"module"</code>はデフォルトモジュールとして定義されていますので使用できません。</p>

<h4>
<a name="recalling-constructor" class="anchor" href="#recalling-constructor"><span class="octicon octicon-link"></span></a>Recalling constructor</h4>

<p>第一引数に名前のみ指定する事で、コンストラクターを再度呼び出す事ができます。
コンストラクターからreturn falseするとそのモジュールは未定義として処理を続行します。
依存モジュールの読み込みを待機させたい場合はreturn falseしてください。</p>

<pre><code>wicker.carriage(["jquery.min.js"]);
(function(){
  var mydata;
  wicker.factory("myconfig", ["jquery"], function($){
    if( !mydata ){
      $.ajax('config.json', {complete: function(xhr){
        mydata = JSON.parse(xhr.responseText);

        wicker.factory("myconfig");

        // コンテクストを確定しない場合はreturn falseする
        return false;
      }});
    }
    return mydata;
  });
}());

// This waits for "myconfig" ajax load
wicker.manufacture(["myconfig"], function(config){
  console.log( config );
});
</code></pre>

<h1></h1>

<h3>
<a name="wickercarriageurl-baseurl" class="anchor" href="#wickercarriageurl-baseurl"><span class="octicon octicon-link"></span></a>wicker.carriage(url, baseURL)</h3>

<p>モジュールファイルを読み込みます。
scriptタグにより読み込みを行いますが、要素の生成はdocumentのDOMContentLoadedイベントの後です。<br>
全てのスクリプト要素はdefer属性がつきます。<br>
baseURLが省略された場合は、<strong>wicker.jsがあるディレクトリ</strong>を基準点とします。
ドキュメントと同じディレクトリを基準にする場合はbaseに './' を指定してください。</p>

<ul>
<li><p>wicker.carriage( url:String )<br>
モジュールローダーのURLから相対パスでurlをロード</p></li>
<li><p>wicker.carriage( url:String, baseURL:String )<br>
baseURLを基準とする相対パスでurlをロード</p></li>
<li>wicker.carriage( url:Array )</li>
<li><p>wicker.carriage( url:Array, baseURL:String )<br>
urlの各項目に対してcarriage(url:String, base:String)を実行</p></li>
<li><p>wicker.carriage( url:Object )<br>
requirejsのrequire.configに相当。<br>
{<br>
  id: url,<br>
  id: url<br>
}<br>
の形式で、モジュールに対するIDを指定可能。</p></li>
</ul><pre><code>wicker.carriage( {
    baseURL: "./",
    paths: {
      "jquery": "js/jquery.min.js",
      "jquery.cookie": "js/jquery.cookie.min.js",
      "jquery.lazyload": {
          "url": "js/jquery.lazyload.min.js",
          'depends': ['jquery'],
          "global": {"jquery": "jQuery"}
      },
      "A": {
          "url": "js/utils.js",
          "attach": "globalFunction"
      }
    }
});
</code></pre>

<p>AMD互換、非AMDライブラリ（jQueryプラグインなど）の読み込みなどの、より詳しい使い方はwikiを参照してください。</p>

<h1></h1>

<h3>
<a name="wickerconfigname-props" class="anchor" href="#wickerconfigname-props"><span class="octicon octicon-link"></span></a>wicker.config(name, props)</h3>

<p>コンフィギュレーション。<br>
定数を指定する。</p>

<h1></h1>

<h3>
<a name="defineid-depends-constructor" class="anchor" href="#defineid-depends-constructor"><span class="octicon octicon-link"></span></a>define(id, depends, constructor)</h3>

<p>AMD 互換の define。</p>

<p>idは省略可能ですが、idが省略された場合はファイル名をidとして使用しますので、1ファイル1モジュールで定義する必要があります。  </p>

<p><code>wicker.carriage(id+".js", "./")</code>を自動的に行います。baseURLはドキュメントのURLになります。<br>
dependsが省略された場合は<code>["require", "exports", "module"]</code>を初期値として使用します。</p>

<p>詳しい使い方はwikiを参照してください。</p>

<h1></h1>

<h3>
<a name="requiredepends-controller" class="anchor" href="#requiredepends-controller"><span class="octicon octicon-link"></span></a>require(depends, controller)</h3>

<p>define()へのラッパー。  </p>

<h1></h1>

<h3>
<a name="dabexportsid" class="anchor" href="#dabexportsid"><span class="octicon octicon-link"></span></a>dab.exports(id)</h3>

<p>namespaceをグローバル関数に変換します。  </p>

<ul>
<li>dab.exports("wicker")<br>
wicker.factory, wicker.manufacture, wicker.carriage, wicker.configをエクスポートします。
エクスポートする事で、namespaceなしで記述する事ができます。<br>
</li>
</ul><pre><code>dab.exports("wicker");
carriage({
  "Backbone": "backbone.min.js",
  "underscore": "underscore.min.js",
  "jquery": "jquery.min.js"
});
require(["Backbone"], function(backbone){
  // use backbone here
});
</code></pre>

<p>IDはスペース区切りで複数の指定が可能です。</p>

<pre><code>dab.exports("wicker other_id");
</code></pre>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>(c) 2014 Wicker Wings</p>

<ul>
<li>Source code: The MIT License<br>
</li>
<li>Documents: CC-BY 3.0 or later<br>
</li>
<li>Sample code: Public domain or CC0<br>
</li>
</ul>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/heporap">heporap</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>