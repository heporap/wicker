/*! wicker.js - ver. 0.4.0 - 2014-05-17
* https://github.com/heporap/wicker/wiki
* Copyright (c) 2014 Wicker Wings
* License: MIT */
!function(a,b){"use strict";function c(){var a=document.getElementsByTagName("script"),b=a[a.length-1],c=b.src||location.href;c=c.match(/^([^?#]+)/)[1],E=c.substring(c.lastIndexOf("/")+1),c=E?c.replace(new RegExp("/"+E+".*"),"/"):c;var d=function(a,b){var c,d=a.split("/"),e=b.split("/");if(c=b.indexOf("://"),-1!==c)return 0===c?location.protocol.replace(/:$/,"")+b:b;if(0===b.indexOf("/"))return a.match(/(^.+:\/\/[^/]*)/)[1]+b;for(d.pop(),c=0;c<e.length;c++)".."===e[c]?d.pop():"."!==e[c]&&d.push(e[c]);return d.join("/")};F=b.getAttribute("data-baseurl"),F?(F.match(/^wicker:(.*)/)?F=RegExp.$1:c=location.href,H=F=d(c,F)):(F=c,H="./");var e=b.getAttribute("data-main");e&&p(e)}function d(a,b,c,d,e){function f(a,b,c,d,e){this.name=a,this.attach=e,this.depends=[],this.constructor=c,this.initialized=!1,this.url=d,this.context=null,this.confs={},k(b,this.depends)}f.prototype={config:function(a){var b;if(a)for(b in a)this.confs[b]=a[b]}},a||(a="wicker_"+K++);var g=z(d)?d:d?d.url:"",h=z(d)?a:d&&d.attach?d.attach:a,i=new f(a,b||[],c,g,h);return e&&(i.url=e.url,i.loaded=e.loaded,i.config(e.confs)),i}function e(a,c){function d(a,c){this.globalName=a,this.contextModName=c,this.oldVar=b,this.moduleIDs=[],this.isSwapping=!1}d.prototype={swap:function(){this.isSwapping||I[this.contextModName]&&I[this.contextModName].context&&(this.oldVar=window[this.globalName],window[this.globalName]=I[this.contextModName].context,this.isSwapping=!0)},recover:function(){I[this.contextModName]&&(window[this.globalName]=this.oldVar),this.isSwapping=!1},addID:function(a){var b,c,d;for(this.moduleIDs.push(a),b=0;b<this.moduleIDs.length;b++)for(c=this.moduleIDs[b],d=this.moduleIDs.lastIndexOf(c);d>b;)this.moduleIDs.splice(d,1),d=this.moduleIDs.lastIndexOf(c)},hasModule:function(a){return-1!==this.moduleIDs.indexOf(a)},isLastModule:function(a){return!this.moduleIDs.length||1===this.moduleIDs.length&&-1!==this.moduleIDs.indexOf(a)},removeID:function(a){this.hasModule(a)&&this.moduleIDs.splice(this.moduleIDs.indexOf(a),1)}};var e,f;if(a)for(e in a)f=a[e],L[f]||(L[f]=new d(f,e)),L[f].addID(c)}function f(){J||(J=!0,G=null,a.removeEventListener("DOMContentLoaded",f,!1));var b,c,d,e,h,i=document,j=i.querySelector("script").parentNode;for(d in L)if(e=L[d],c=I[d]){var k=D(c.depends);e.moduleIDs.length&&c.initialized&&k&&e.swap()}for(b in I)c=I[b],!c.loaded&&c.url&&D(c.depends)&&(h=i.createElement("script"),h.setAttribute("src",c.url),h.setAttribute("async","async"),h.setAttribute("defer","defer"),h.addEventListener?h.addEventListener("load",g,!1):h.attachEvent&&h.attachEvent("onload",g),j.insertBefore(h,null),c.loaded=!0)}function g(a){var b=a.target||a.srcElement;h(b.getAttribute("src")),i(b),f()}function h(a){var b,c,d,e,f,g=[];for(b in I)if(e=I[b],e.url===a){if(G&&G!==b)if(f=I[G],f.constructor&&!f.initialized){var h=I[b];if(e=I[b]=f,e.name=b,e.url=a,e.loaded=!0,k(h.confs,e.confs),h=null,/^wicker/.test(G)){delete I[G],G=f=null;continue}}else if(I[G].context&&(e.context=I[G].context,e.initialized=!0,/^wicker/.test(G))){delete I[G],G=f=null,q(b);continue}g.push(b)}for(c=0,d=!1;c<g.length;c++)b=g[c],e=I[b],!e.initialized&&D(e.depends)&&(d=r(b),e.constructor||(e.context=window[e.attach]?window[e.attach]:!0,e.initialized=!0),d&&q(b));var i;for(d in L)i=L[d],i.removeID(b),i.moduleIDs.length||i.recover();G=null}function i(a){a.removeEventListener?a.removeEventListener("load",g,!1):a.detachEvent&&a.detachEvent("onload",g),a.parentNode.removeChild(a)}function j(a,b){1===arguments.length?configWicker(a):l(a,b)}function k(a,b){var c;if(a.constructor===Array)for(c=0;c<a.length;c++)b.push(a[c]);else for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function l(a,b){I[a]||(I[a]=d(a,[],null,{})),I[a].config(b),o(a)}function m(a,b,c,d){var e;if(a.constructor===Array)for(c=0;c<a.length;c++)m(a[c],b);else if(z(a))e=a,b=0===e.indexOf("/")||-1!==e.indexOf("://")?"":b?b:F,n(c,b+e,d);else{b=a.baseURL||b||F;var f=a.paths||a;for(c in f){var g=f[c];z(g)?(e=g,d={}):(e=g.url,d=g),m(e,b,c,d)}}}function n(a,b,c){var g,h;if(G=null,!a||!I[a]){for(g in I)I[g].url===b&&(I[g].loaded=!0);c||(c={}),c.url=b,h=d(a,c.depends,null,c),I[h.name]=h,e(c.global,h.name),J&&f()}}function o(){var a,b,c,e=null,f=["require","exports","module"];for(c=0;c<arguments.length;c++)z(arguments[c])?e=arguments[c]:A(arguments[c])?f=arguments[c]:B(arguments[c])?a=arguments[c]:arguments[c]&&(e=arguments[c].name,b={},k(arguments[c],b),delete b.id);if(1===arguments.length&&e)return G=null,r(e)&&q(e),G=e,e;if(e&&I[e]&&I[e].initialized)return e;var g=d(e,f,a,{},e?I[e]:null);return e=g.name,b&&g.config(b),I[e]=g,G=null,r(e)&&q(e),G=e,e}function p(){var a,b,c=null,d=["require","exports","module"],e=function(a){return function(){return a}};for(b=0;b<arguments.length;b++)z(arguments[b])?c=arguments[b]:A(arguments[b])?d=arguments[b]:B(arguments[b])?a=arguments[b]:arguments[b]&&(a=e(a));m(u(d),H),c&&m(u([c]),H),o(c,d,a),c=d=a=null}function q(a){var b;for(b in I)I[b].initialized||-1===I[b].depends.indexOf(a)||r(b)&&q(b)}function r(a){var b,c=I[a],d=c.attach;return D(c.depends)?(c.constructor&&(c.context=c.constructor.apply(c.confs,C(c.depends)),w(c.context)&&(b=I.exports.context,b.hasData()?(c.context={},k(b,c.context),b.clear()):c.context=window[d]||!0),c.initialized=!0),1):!1}function s(a,b){o(null,a,b)}function t(a,b){p(a,b)}function u(a){var b,c,d={};for(b=0;b<a.length;b++)c=a[b],d[a[b]]=/\.js$/.test(c)?c:c+".js";return d}function v(){o("require",[],function(){return function(a){return I[a]?I[a].context:null}}),o("exports",[],function(){function a(){}return a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]},a.prototype.hasData=function(){for(var a in this)if(this.hasOwnProperty(a))return!0;return!1},new a}),o("module",[],function(){return{}}),G=null}function w(a){return a===b}function x(a){return null===a}function y(a){return!w(a)&&!x(a)}function z(a){return y(a)&&"string"==typeof a}function A(a){return y(a)&&a.constructor===Array}function B(a){return y(a)&&"function"==typeof a}function C(a){var b,c,d=[];for(b=0;b<a.length;b++)c=I[a[b]],c&&c.context&&d.push(c.context);return d}function D(a){return C(a).length===a.length}var E,F,G,H="./",I={},J=!1,K=1,L={};v(),c();var M=a.dab||{};a.dab=M,M.klass=M.klass||{},M.klass.wicker="factory manufacture carriage config",M.exports||(M.exports=function(b){var c,d,e,f;for(b=b.split(/ /),c=0;c<b.length;c++)if(e=b[c],this.klass[e]){var g=this.klass[e].split(" ");for(d=0;d<g.length;d++)if(f=g[d],-1===f.indexOf("."))a[f]=a[e][f];else{var h=f.split(".");a[h[1]]=a[h[0]][h[1]]}}});var N={};a.wicker=N,N.factory=o,N.manufacture=s,N.carriage=m,N.config=j,a.define=p,a.define.amd={},a.require=t,a.addEventListener("DOMContentLoaded",f,!1)}(this);