/*! wicker.js - ver. 0.1.0 - 2014-05-05
* https://github.com/heporap/wicker/wiki
* Copyright (c) 2014 Wicker Wings
* License: MIT */
!function(a,b){"use strict";function c(a,b,c,d){function e(a,b,c,d,e,f){this.name=a,this.attach=e,this.depends=[],this.global={},this._global={},this.constructor=c,this.initialized=!1,this.url=d,this.context=null,this.confs={},i(b,this.depends),i(f,this.global)}e.prototype={config:function(a){var b;if(a)for(b in a)this.confs[b]=a[b]}},a||(a="wicker_"+I++);var f=z(d)?d:d?d.url:"",g=z(d)?{}:d&&d.global?d.global:{},h=z(d)?a:d&&d.attach?d.attach:a,j=new e(a,b||[],c,f,h,g);return j}function d(){H||(H=!0,a.removeEventListener("DOMContentLoaded",d,!1));var b,c,f,g=document,h=g.querySelector("script").parentNode;for(b in F)if(c=F[b],!c.loaded&&c.url&&B(c.depends)){for(var i in c.global)c._global[i]=window[c.global[i]],window[c.global[i]]=F[i].context;f=g.createElement("script"),f.setAttribute("src",F[b].url),f.setAttribute("async","async"),f.setAttribute("defer","defer"),f.addEventListener?f.addEventListener("load",e,!1):f.attachEvent&&f.attachEvent("onload",e),h.insertBefore(f,null),F[b].loaded=!0}p()}function e(a){var b=a.target||a.srcElement;f(b.getAttribute("src")),g(b),d()}function f(a){var b,c,d,e=[];for(b in F)if(d=F[b],d.url===a){if(E){var f=F[b];if(d=F[b]=F[E],d.name=b,d.url=a,d.loaded=!0,i(f.confs,d.confs),f=null,/^wicker/.test(E)){delete F[E];continue}}e.push(b)}for(c=0;c<e.length;c++)if(b=e[c],d=F[b],!d.initialized){q(b),o(b),d.constructor||(d.context=window[d.attach]?window[d.attach]:!0,d.initialized=!0);for(b in d.global)window[d.global[b]]=d._global[b],d._global[b]=null}E=null}function g(a){a.removeEventListener?a.removeEventListener("load",e,!1):a.detachEvent&&a.detachEvent("onload",e),a.parentNode.removeChild(a)}function h(a,b){1===arguments.length?configWicker(a):j(a,b)}function i(a,b){var c;if(a.constructor===Array)for(c=0;c<a.length;c++)b.push(a[c]);else for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function j(a,b){F[a]||(F[a]=c(a,[],null,{})),F[a].config(b),m(a)}function k(a,b,c,d){var e;if(a.constructor===Array)for(c=0;c<a.length;c++)k(a[c],b);else if(z(a))e=a,b=0===e.indexOf("/")||-1!==e.indexOf("://")?"":b?b:D,l(c,b+e,d);else{b=a.baseURL||b||D;var f=a.paths||a;for(c in f){var g=f[c];z(g)?(e=g,d={}):(e=g.url,d=g),k(e,b,c,d)}}}function l(a,b,e){var f,g;if(E=null,!a||!F[a]){for(f in F)F[f].url===b&&(F[f].loaded=!0);e||(e={}),e.url=b,g=c(a,e.depends,null,e),F[g.name]=g,H&&d()}}function m(a,b,d){var e,f;if(1===arguments.length)return e=a,E=null,q(e),o(e),E=e,e;if(2===arguments.length&&(d=b,b=[]),z(a)?e=a:y(a)&&(e=a.id||a.name,f={},i(a,f),delete f.id),e&&F[e]&&F[e].initialized)return!1;var g=c(e,b,d,{});e=g.name;var h=F[e];return h?(g.config(h.confs),g.url=h.url):f&&g.config(f),F[e]=g,h=null,E=null,q(e),o(e),E=e,e}function n(a,b,c){1===arguments.length?(c=a,b=["require","exports","module"],a=null):2===arguments.length&&(c=b,z(a)?b=["require","exports","module"]:(b=a,a=null)),k(u(b,".js"),"./"),m(a,b,c)}function o(a){var b;for(b in F)F[b].initialized||-1===F[b].depends.indexOf(a)||q(b);p()}function p(){for(var a=G.length;a--;){var b=G[a];B(b.depends)&&(b.controller.apply(null,A(b.depends)),G.splice(a,1))}}function q(a){var b,c=F[a],d=c.attach;return B(c.depends)?(c.constructor&&(c.context=c.constructor.apply(c.confs,A(c.depends)),w(c.context)&&(b=F.exports.context,b.hasData()?(c.context={},i(b,c.context),b.clear()):c.context=window[d]||!0),c.initialized=!0),1):!1}function r(a,b){var c={depends:a,controller:b};G.push(c),H&&p()}function s(a,b){if(1===arguments.length){if(z(a))return t(a);b=a,a=["require","exports","module"]}k(u(a,".js"),"./"),r(a,b)}function t(a){return F[a].context}function u(a){var b,c,d={};for(b=0;b<a.length;b++)c=a[b],d[a[b]]=/\.js$/.test(c)?c:c+".js";return d}function v(){m("require",[],function(){return function(a){return F[a]?F[a].context:null}}),m("exports",[],function(){function a(){}return a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]},a.prototype.hasData=function(){for(var a in this)if(this.hasOwnProperty(a))return!0;return!1},new a}),m("module",[],function(){var a={};return a}),E=null}function w(a){return a===b}function x(a){return null===a}function y(a){return!w(a)&&!x(a)}function z(a){return y(a)&&"string"==typeof a}function A(a){var b,c,d=[];for(b=0;b<a.length;b++)c=F[a[b]],c&&c.context&&d.push(c.context);return d}function B(a){return A(a).length===a.length}var C,D;!function(){var a=document.getElementsByTagName("script"),b=a[a.length-1],c=b.src||location.href;c=c.match(/^([^?#]+)/)[1],C=c.substring(c.lastIndexOf("/")+1),D=c.replace(new RegExp("/"+C+".*"),"/")}();var E,F={},G=[],H=!1,I=1;v();var J=a.dab||{};a.dab=J,J.klass=J.klass||{},J.klass.wicker="factory manufacture carriage config",J.klass.amd="wicker.define wicker.require",J.exports||(J.exports=function(b){var c,d,e,f;for(b=b.split(/ /),c=0;c<b.length;c++)if(e=b[c],this.klass[e]){var g=this.klass[e].split(" ");for(d=0;d<g.length;d++)if(f=g[d],-1===f.indexOf("."))a[f]=a[e][f];else{var h=f.split(".");a[h[1]]=a[h[0]][h[1]]}}});var K={};a.wicker=K,K.factory=m,K.manufacture=r,K.carriage=k,K.config=h,K.define=n,K.define.amd={},K.require=s,a.addEventListener("DOMContentLoaded",d,!1)}(this);