/*! wicker.js - ver. 0.3.6 - 2014-10-31
* https://github.com/heporap/wicker/wiki
* Copyright (c) 2014 Wicker Wings
* License: MIT */
!function(a,b){"use strict";function c(){var a,b,c=M.getElementsByTagName("script"),e=c[c.length-1],f=e.src||location.href;if(M.body){for(b=0;b<c.length;b++)if(/wicker\.js/.test(c[b].src)){e=c[b];break}f=e.src}f=f.match(/^([^?#]+)/)[1],F=f.substring(f.lastIndexOf("/")+1),f=F?f.replace(new RegExp("/"+F+".*"),"/"):f,G=e.getAttribute("data-baseurl"),G?(G.match(/^wicker:(.*)/)?G=RegExp.$1:f=location.href,L=G=d(f,G)):(G=f,L=location.href.substring(0,location.href.lastIndexOf("/")+1)),a=e.getAttribute("data-main"),a&&n(u([a]))}function d(a,b){var c,d=a.split("/"),e=b.split("/");if(c=b.indexOf("://"),-1!==c)return 0===c?location.protocol.replace(/:$/,"")+b:b;if(0===b.indexOf("/"))return a.match(/(^.+:\/\/[^/]*)/)[1]+b;for(d.pop(),c=0;c<e.length;c++)".."===e[c]?d.pop():"."!==e[c]&&d.push(e[c]);return d.join("/")}function e(a,b,c,d,e){function f(a,b,c,d,e){this.name=a,this.attach=e,this.depends=[],this.constructor=c,this.initialized=!1,this.url=d,this.context=null,this.confs={},l(b,this.depends)}f.prototype={config:function(a){var b;if(a)for(b in a)this.confs[b]=a[b]}},y(a)||(a="wicker_"+P++);var g=z(d)?d:d?d.url:"",h=z(d)?a:d&&d.attach?d.attach:a,i=new f(a,b||[],c,g,h);return e&&(i.url=e.url,i.loaded=e.loaded,i.config(e.confs)),i}function f(a,c){function d(a,c){this.globalName=a,this.contextModName=c,this.oldVar=b,this.moduleIDs=[],this.isSwapping=!1}d.prototype={swap:function(){this.isSwapping||N[this.contextModName]&&N[this.contextModName].context&&(this.oldVar=window[this.globalName],window[this.globalName]=N[this.contextModName].context,this.isSwapping=!0)},recover:function(){N[this.contextModName]&&(window[this.globalName]=this.oldVar),this.isSwapping=!1},addID:function(a){var b,c,d;for(this.moduleIDs.push(a),b=0;b<this.moduleIDs.length;b++)for(c=this.moduleIDs[b],d=this.moduleIDs.lastIndexOf(c);d>b;)this.moduleIDs.splice(d,1),d=this.moduleIDs.lastIndexOf(c)},hasModule:function(a){return-1!==this.moduleIDs.indexOf(a)},isLastModule:function(a){return!this.moduleIDs.length||1===this.moduleIDs.length&&-1!==this.moduleIDs.indexOf(a)},removeID:function(a){this.hasModule(a)&&this.moduleIDs.splice(this.moduleIDs.indexOf(a),1)}};var e,f;if(a)for(e in a)f=a[e],Q[f]||(Q[f]=new d(f,e)),Q[f].addID(c)}function g(){O||(O=!0,H=null,a.removeEventListener&&(M.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1)),M.detachEvent&&M.detachEvent("onload",g));var b,c,d,e,f,i=M,j=i.querySelector("script").parentNode;for(d in Q)if(e=Q[d],c=N[d]){var k=D(c.depends);e.moduleIDs.length&&c.initialized&&k&&e.swap()}for(b in N)if(c=N[b],!c.loaded&&c.url&&D(c.depends)){if(/^wicker:|^module:/.test(c.url))continue;f=i.createElement("script"),f.setAttribute("src",c.url),f.setAttribute("async","async"),f.setAttribute("defer","defer"),f.addEventListener?f.addEventListener("load",h,!1):f.attachEvent&&f.attachEvent("onload",h),j.insertBefore(f,null),c.loaded=!0}}function h(a){var b=a.target||a.srcElement;i(b.getAttribute("src")),j(b),g()}function i(a){var b,c,e,f,g,h=[];for(b in N)if(f=N[b],/^wicker:|^module:/.test(f.url))f.url=d(a,f.url.match(/^(?:wicker:|module:)(.*)/)[1]);else if(f.url===a){if(H&&/^wicker/.test(H)&&H!==b){if(g=N[H],g.constructor&&!g.initialized){var i=N[b];f=N[b]=g,f.name=b,f.url=a,f.loaded=!0,l(i.confs,f.confs),i=null,delete N[H],H=g=null}else N[H].context&&(f.context=N[H].context,f.initialized=!0,delete N[H],H=g=null,r(b));continue}h.push(b)}for(c=0,e=!1;c<h.length;c++)b=h[c],f=N[b],!f.initialized&&D(f.depends)&&(e=s(b),f.constructor||(f.context=window[f.attach]?window[f.attach]:!0,f.initialized=!0),e&&r(b));var j;for(e in Q)j=Q[e],j.removeID(b),j.moduleIDs.length||j.recover();H=null}function j(a){a.removeEventListener?a.removeEventListener("load",h,!1):a.detachEvent&&a.detachEvent("onload",h),a.parentNode.removeChild(a)}function k(a,b){1===arguments.length?configWicker(a):m(a,b)}function l(a,b){var c;if(a.constructor===Array)for(c=0;c<a.length;c++)b.push(a[c]);else for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function m(a,b){N[a]||(N[a]=e(a,[],null,{})),N[a].config(b),p(a)}function n(a,b,c,e){var f;if(a.constructor===Array)for(c=0;c<a.length;c++)n(a[c],b);else if(z(a)){f=a,b=0===f.lastIndexOf("/",0)||-1!==f.lastIndexOf("://",0)?"":b?b:G,b=-1!==b.lastIndexOf("://",0)||0===b.lastIndexOf("//",0)?b:d(location.href,b);var g=!1;f=d(b,f);for(var h in N)if(N[h].url===f){g=!0;break}g||o(c,f,e)}else{b=a.baseURL||b;var i=a.paths||a;for(c in i){var j=i[c];z(j)?(f=j,e={}):(f=j.url,e=j),n(f,b,c,e)}}}function o(a,b,c){var d,h;if(H=null,!a||!N[a]){for(d in N)N[d].url===b&&(N[d].loaded=!0);c||(c={}),c.url=b,h=e(a,c.depends,null,c),N[h.name]=h,f(c.global,h.name),O&&g()}}function p(){var a,b,c,d=null,f=[I,J,K];for(c=0;c<arguments.length;c++)z(arguments[c])?d=arguments[c]:A(arguments[c])?f=arguments[c]:B(arguments[c])?a=arguments[c]:arguments[c]&&(d=arguments[c].name,b={},l(arguments[c],b),delete b.id);if(d){var g=d.indexOf("?");d=d.substring(d.lastIndexOf("/")+1,-1===g?d.length:g)}if(1===arguments.length&&d)return H=null,s(d)&&r(d),H=d,d;if(d&&N[d]&&N[d].initialized)return d;var h=e(d,f,a,{},d?N[d]:null);return d=h.name,b&&h.config(b),N[d]=h,H=null,s(d)&&r(d),H=d,d}function q(){var a,b,c,d=null,e=[I,J,K];for(b=0;b<arguments.length;b++)z(arguments[b])?d=arguments[b]:A(arguments[b])?e=arguments[b]:arguments[b]&&(a=arguments[b]);B(a)||(a=function(a){return function(){return a}}(a)),b=e.length;var f=[];for(b=0;b<e.length;b++)c=N[e[b]],c&&c.context||f.push(e[b]);n(u(C(f)),L),p(d,e,a),d=e=a=null}function r(a){var b;for(b in N)N[b].initialized||-1===N[b].depends.indexOf(a)||s(b)&&r(b)}function s(a){var b,c=N[a],d=c.attach;return D(c.depends)?(c.constructor&&(c.context=c.constructor.apply(c.confs,C(c.depends)),w(c.context)&&(b=N.exports.context,b.hasData()?(c.context={},l(b,c.context),b.clear()):c.context=window[d]||!0),c.initialized=!0),1):!1}function t(a,b){q(a,b)}function u(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d[b]=/\.js$/.test(c)?c:c+".js";return d}function v(){p(I,[],function(){return function(a,b){return 2===arguments.length&&A(a)&&B(b)?q(a,b):N[a]?N[a].context:null}}),p(J,[],function(){function a(){}return a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]},a.prototype.hasData=function(){for(var a in this)if(this.hasOwnProperty(a))return!0;return!1},new a}),p(K,[],function(){return{}}),H=null}function w(a){return a===b}function x(a){return null===a}function y(a){return!w(a)&&!x(a)}function z(a){return y(a)&&"string"==typeof a}function A(a){return y(a)&&a.constructor===Array}function B(a){return y(a)&&"function"==typeof a}function C(a){var b,c,d=[];for(b=0;b<a.length;b++)c=N[a[b]],c&&c.context&&d.push(c.context);return d}function D(a){return C(a).length===a.length}function E(){"complete"==M.readyState&&(g(),M.detachEvent("onreadystatechange",E))}var F,G,H,I="require",J="exports",K="module",L="./",M=window.document,N={},O=!1,P=1,Q={};v(),c();var R=a.dab||{};a.dab=R,R.klass=R.klass||{},R.klass.wicker="factory manufacture carriage config",R.exports||(R.exports=function(b){var c,d,e,f;for(b=b.split(/ /),c=0;c<b.length;c++)if(e=b[c],this.klass[e]){var g=this.klass[e].split(" ");for(d=0;d<g.length;d++)if(f=g[d],-1===f.indexOf("."))a[f]=a[e][f];else{var h=f.split(".");a[h[1]]=a[h[0]][h[1]]}}});var S={};a.wicker=S,S.factory=p,S.manufacture=p,S.carriage=n,S.config=k,a.define=q,a.define.amd={},a.require=t,a.addEventListener&&(M.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)),M.attachEvent&&(M.attachEvent("onreadystatechange",E),M.attachEvent("onload",g))}(this);