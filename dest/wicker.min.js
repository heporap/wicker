/*! wicker.js - ver. 0.3.6 - 2014-10-31
* https://github.com/heporap/wicker/wiki
* Copyright (c) 2014 Wicker Wings
* License: MIT */
!function(a,b){"use strict";function c(){var a,b,c=N.getElementsByTagName("script"),e=c[c.length-1],f=e.src||location.href;if(N.body){for(b=0;b<c.length;b++)if(/wicker\.js/.test(c[b].src)){e=c[b];break}f=e.src}f=f.match(/^([^?#]+)/)[1],G=f.substring(f.lastIndexOf("/")+1),f=G?f.replace(new RegExp("/"+G+".*"),"/"):f,H=e.getAttribute("data-baseurl"),H?(H.match(/^wicker:(.*)/)?H=RegExp.$1:f=location.href,M=H=d(f,H)):(H=f,M=location.href.substring(0,location.href.lastIndexOf("/")+1)),a=e.getAttribute("data-main"),a&&o(v([a]))}function d(a,b){var c,d=a.split("/"),e=b.split("/");if(c=b.indexOf("://"),-1!==c)return 0===c?location.protocol.replace(/:$/,"")+b:b;if(0===b.indexOf("/"))return a.match(/(^.+:\/\/[^/]*)/)[1]+b;for(d.pop(),c=0;c<e.length;c++)".."===e[c]?d.pop():"."!==e[c]&&d.push(e[c]);return d.join("/")}function e(a,b,c,d,e){function f(a,b,c,d,e){this.name=a,this.attach=e,this.depends=[],this.constructor=c,this.initialized=!1,this.url=d,this.context=null,this.confs={},l(b,this.depends)}f.prototype={config:function(a){var b;if(a)for(b in a)this.confs[b]=a[b]}},z(a)||(a="wicker_"+Q++);var g=A(d)?d:d?d.url:"",h=A(d)?a:d&&d.attach?d.attach:a,i=new f(a,b||[],c,g,h);return e&&(i.url=e.url,i.loaded=e.loaded,i.config(e.confs)),i}function f(a,c){function d(a,c){this.globalName=a,this.contextModName=c,this.oldVar=b,this.moduleIDs=[],this.isSwapping=!1}d.prototype={swap:function(){this.isSwapping||O[this.contextModName]&&O[this.contextModName].context&&(this.oldVar=window[this.globalName],window[this.globalName]=O[this.contextModName].context,this.isSwapping=!0)},recover:function(){O[this.contextModName]&&(window[this.globalName]=this.oldVar),this.isSwapping=!1},addID:function(a){var b,c,d;for(this.moduleIDs.push(a),b=0;b<this.moduleIDs.length;b++)for(c=this.moduleIDs[b],d=this.moduleIDs.lastIndexOf(c);d>b;)this.moduleIDs.splice(d,1),d=this.moduleIDs.lastIndexOf(c)},hasModule:function(a){return-1!==this.moduleIDs.indexOf(a)},isLastModule:function(a){return!this.moduleIDs.length||1===this.moduleIDs.length&&-1!==this.moduleIDs.indexOf(a)},removeID:function(a){this.hasModule(a)&&this.moduleIDs.splice(this.moduleIDs.indexOf(a),1)}};var e,f;if(a)for(e in a)f=a[e],R[f]||(R[f]=new d(f,e)),R[f].addID(c)}function g(){P||(P=!0,I=null,a.removeEventListener&&(N.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1)),N.detachEvent&&N.detachEvent("onload",g));var b,c,d,e,f,i=N,j=i.querySelector("script").parentNode;for(d in R)if(e=R[d],c=O[d]){var k=E(c.depends);e.moduleIDs.length&&c.initialized&&k&&e.swap()}for(b in O)if(c=O[b],!c.loaded&&c.url&&E(c.depends)){if(/^wicker:|^module:/.test(c.url))continue;f=i.createElement("script"),f.setAttribute("src",c.url),f.setAttribute("async","async"),f.setAttribute("defer","defer"),f.addEventListener?f.addEventListener("load",h,!1):f.attachEvent&&f.attachEvent("onload",h),j.insertBefore(f,null),c.loaded=!0}}function h(a){var b=a.target||a.srcElement;i(b.getAttribute("src")),j(b),g()}function i(a){var b,c,e,f,g,h=[];for(b in O)if(f=O[b],/^wicker:|^module:/.test(f.url))f.url=d(a,f.url.match(/^(?:wicker:|module:)(.*)/)[1]);else if(f.url===a){if(I&&/^wicker/.test(I)&&I!==b){if(g=O[I],g.constructor&&!g.initialized){var i=O[b];f=O[b]=g,f.name=b,f.url=a,f.loaded=!0,l(i.confs,f.confs),i=null,delete O[I],I=g=null}else O[I].context&&(f.context=O[I].context,f.initialized=!0,delete O[I],I=g=null,s(b));continue}h.push(b)}for(c=0,e=!1;c<h.length;c++)b=h[c],f=O[b],!f.initialized&&E(f.depends)&&(e=t(b),f.constructor||(f.context=window[f.attach]?window[f.attach]:!0,f.initialized=!0),e&&s(b));var j;for(e in R)j=R[e],j.removeID(b),j.moduleIDs.length||j.recover();I=null}function j(a){a.removeEventListener?a.removeEventListener("load",h,!1):a.detachEvent&&a.detachEvent("onload",h),a.parentNode.removeChild(a)}function k(a,b){1===arguments.length?configWicker(a):n(a,b)}function l(a,b){var c;if(a.constructor===Array)for(c=0;c<a.length;c++)b.push(a[c]);else for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function n(a,b){O[a]||(O[a]=e(a,[],null,{})),O[a].config(b),q(a)}function o(a,b,c,e){var f;if(a.constructor===Array)for(c=0;c<a.length;c++)o(a[c],b);else if(A(a)){f=a,b=0===f.lastIndexOf("/",0)||-1!==f.lastIndexOf("://",0)?"":b?b:H;var g=!1;f=d(b,f);for(var h in O)if(O[h].url===f){g=!0;break}g||p(c,f,e)}else{b=a.baseURL||b;var i=a.paths||a;for(c in i){var j=i[c];A(j)?(f=j,e={}):(f=j.url,e=j),o(f,b,c,e)}}}function p(a,b,c){var d,h;if(I=null,!a||!O[a]){for(d in O)O[d].url===b&&(O[d].loaded=!0);c||(c={}),c.url=b,h=e(a,c.depends,null,c),O[h.name]=h,f(c.global,h.name),P&&g()}}function q(){var a,b,c,d=null,f=[J,K,L];for(c=0;c<arguments.length;c++)A(arguments[c])?d=arguments[c]:B(arguments[c])?f=arguments[c]:C(arguments[c])?a=arguments[c]:arguments[c]&&(d=arguments[c].name,b={},l(arguments[c],b),delete b.id);if(d){var g=d.indexOf("?");d=d.substring(d.lastIndexOf("/")+1,-1===g?d.length:g)}if(1===arguments.length&&d)return I=null,t(d)&&s(d),I=d,d;if(d&&O[d]&&O[d].initialized)return d;var h=e(d,f,a,{},d?O[d]:null);return d=h.name,b&&h.config(b),O[d]=h,I=null,t(d)&&s(d),I=d,d}function r(){var a,b,c=null,d=[J,K,L];for(b=0;b<arguments.length;b++)A(arguments[b])?c=arguments[b]:B(arguments[b])?d=arguments[b]:arguments[b]&&(a=arguments[b]);C(a)||(a=function(a){return function(){return a}}(a)),b=d.length;var e=[];for(b=0;b<d.length;b++)m=O[d[b]],m&&m.context||e.push(d[b]);o(v(D(e)),M),q(c,d,a),c=d=a=null}function s(a){var b;for(b in O)O[b].initialized||-1===O[b].depends.indexOf(a)||t(b)&&s(b)}function t(a){var b,c=O[a],d=c.attach;return E(c.depends)?(c.constructor&&(c.context=c.constructor.apply(c.confs,D(c.depends)),x(c.context)&&(b=O.exports.context,b.hasData()?(c.context={},l(b,c.context),b.clear()):c.context=window[d]||!0),c.initialized=!0),1):!1}function u(a,b){r(a,b)}function v(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d[b]=/\.js$/.test(c)?c:c+".js";return d}function w(){q(J,[],function(){return function(a,b){return 2===arguments.length&&B(a)&&C(b)?r(a,b):O[a]?O[a].context:null}}),q(K,[],function(){function a(){}return a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]},a.prototype.hasData=function(){for(var a in this)if(this.hasOwnProperty(a))return!0;return!1},new a}),q(L,[],function(){return{}}),I=null}function x(a){return a===b}function y(a){return null===a}function z(a){return!x(a)&&!y(a)}function A(a){return z(a)&&"string"==typeof a}function B(a){return z(a)&&a.constructor===Array}function C(a){return z(a)&&"function"==typeof a}function D(a){var b,c,d=[];for(b=0;b<a.length;b++)c=O[a[b]],c&&c.context&&d.push(c.context);return d}function E(a){return D(a).length===a.length}function F(){"complete"==N.readyState&&(g(),N.detachEvent("onreadystatechange",F))}var G,H,I,J="require",K="exports",L="module",M="./",N=window.document,O={},P=!1,Q=1,R={};w(),c();var S=a.dab||{};a.dab=S,S.klass=S.klass||{},S.klass.wicker="factory manufacture carriage config",S.exports||(S.exports=function(b){var c,d,e,f;for(b=b.split(/ /),c=0;c<b.length;c++)if(e=b[c],this.klass[e]){var g=this.klass[e].split(" ");for(d=0;d<g.length;d++)if(f=g[d],-1===f.indexOf("."))a[f]=a[e][f];else{var h=f.split(".");a[h[1]]=a[h[0]][h[1]]}}});var T={};a.wicker=T,T.factory=q,T.manufacture=q,T.carriage=o,T.config=k,a.define=r,a.define.amd={},a.require=u,a.addEventListener&&(N.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)),N.attachEvent&&(N.attachEvent("onreadystatechange",F),N.attachEvent("onload",g))}(this);