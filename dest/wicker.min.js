/*! wicker.js - ver. 0.2.1 - 2014-05-12
* https://github.com/heporap/wicker/wiki
* Copyright (c) 2014 Wicker Wings
* License: MIT */
!function(a,b){"use strict";function c(a,b,c,d,e){function f(a,b,c,d,e){this.name=a,this.attach=e,this.depends=[],this.constructor=c,this.initialized=!1,this.url=d,this.context=null,this.confs={},j(b,this.depends)}f.prototype={config:function(a){var b;if(a)for(b in a)this.confs[b]=a[b]}},a||(a="wicker_"+I++);var g=y(d)?d:d?d.url:"",h=y(d)?a:d&&d.attach?d.attach:a,i=new f(a,b||[],c,g,h);return e&&(i.url=e.url,i.loaded=e.loaded,i.config(e.confs)),i}function d(a,c){function d(a,c){this.globalName=a,this.contextModName=c,this.oldVar=b,this.moduleIDs=[],this.isSwapping=!1}d.prototype={swap:function(){this.isSwapping||G[this.contextModName]&&G[this.contextModName].context&&(this.oldVar=window[this.globalName],window[this.globalName]=G[this.contextModName].context,this.isSwapping=!0)},recover:function(){G[this.contextModName]&&(window[this.globalName]=this.oldVar),this.isSwapping=!1},addID:function(a){var b,c,d;for(this.moduleIDs.push(a),b=0;b<this.moduleIDs.length;b++)for(c=this.moduleIDs[b],d=this.moduleIDs.lastIndexOf(c);d>b;)this.moduleIDs.splice(d,1),d=this.moduleIDs.lastIndexOf(c)},hasModule:function(a){return-1!==this.moduleIDs.indexOf(a)},isLastModule:function(a){return!this.moduleIDs.length||1===this.moduleIDs.length&&-1!==this.moduleIDs.indexOf(a)},removeID:function(a){this.hasModule(a)&&this.moduleIDs.splice(this.moduleIDs.indexOf(a),1)}};var e,f;if(a)for(e in a)f=a[e],J[f]||(J[f]=new d(f,e)),J[f].addID(c)}function e(){H||(H=!0,a.removeEventListener("DOMContentLoaded",e,!1));var b,c,d,g,h,i=document,j=i.querySelector("script").parentNode;for(d in J)if(g=J[d],c=G[d]){var k=C(c.depends);g.moduleIDs.length&&c.initialized&&k&&g.swap()}for(b in G)c=G[b],!c.loaded&&c.url&&C(c.depends)&&(h=i.createElement("script"),h.setAttribute("src",c.url),h.setAttribute("async","async"),h.setAttribute("defer","defer"),h.addEventListener?h.addEventListener("load",f,!1):h.attachEvent&&h.attachEvent("onload",f),j.insertBefore(h,null),c.loaded=!0)}function f(a){var b=a.target||a.srcElement;g(b.getAttribute("src")),h(b),e()}function g(a){var b,c,d,e,f=[];for(b in G)if(e=G[b],e.url===a){if(F&&!G[F].constructor&&!G[F].initialized){var g=G[b];if(e=G[b]=G[F],e.name=b,e.url=a,e.loaded=!0,j(g.confs,e.confs),g=null,/^wicker/.test(F)){delete G[F];continue}}f.push(b)}for(c=0,d=!1;c<f.length;c++)b=f[c],e=G[b],e.initialized||(d=q(b),e.constructor||(e.context=window[e.attach]?window[e.attach]:!0,e.initialized=!0),d&&p(b));var h;for(d in J)h=J[d],h.removeID(b),h.moduleIDs.length||h.recover();F=null}function h(a){a.removeEventListener?a.removeEventListener("load",f,!1):a.detachEvent&&a.detachEvent("onload",f),a.parentNode.removeChild(a)}function i(a,b){1===arguments.length?configWicker(a):k(a,b)}function j(a,b){var c;if(a.constructor===Array)for(c=0;c<a.length;c++)b.push(a[c]);else for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function k(a,b){G[a]||(G[a]=c(a,[],null,{})),G[a].config(b),n(a)}function l(a,b,c,d){var e;if(a.constructor===Array)for(c=0;c<a.length;c++)l(a[c],b);else if(y(a))e=a,b=0===e.indexOf("/")||-1!==e.indexOf("://")?"":b?b:E,m(c,b+e,d);else{b=a.baseURL||b||E;var f=a.paths||a;for(c in f){var g=f[c];y(g)?(e=g,d={}):(e=g.url,d=g),l(e,b,c,d)}}}function m(a,b,f){var g,h;if(F=null,!a||!G[a]){for(g in G)G[g].url===b&&(G[g].loaded=!0);f||(f={}),f.url=b,h=c(a,f.depends,null,f),G[h.name]=h,d(f.global,h.name),H&&e()}}function n(){var a,b,d,e=null,f=["require","exports","module"];for(d=0;d<arguments.length;d++)y(arguments[d])?e=arguments[d]:z(arguments[d])?f=arguments[d]:A(arguments[d])?a=arguments[d]:arguments[d]&&(e=arguments[d].name,b={},j(arguments[d],b),delete b.id);if(1===arguments.length&&e)return F=null,q(e)&&p(e),F=e,e;if(e&&G[e]&&G[e].initialized)return e;var g=c(e,f,a,{},e?G[e]:null);return e=g.name,b&&g.config(b),G[e]=g,F=null,q(e)&&p(e),F=e,e}function o(){var a,b,c=null,d=["require","exports","module"],e=function(a){return function(){return a}};for(b=0;b<arguments.length;b++)y(arguments[b])?c=arguments[b]:z(arguments[b])?d=arguments[b]:A(arguments[b])?a=arguments[b]:arguments[b]&&(a=e(a));l(t(d,".js"),"./"),n(c,d,a),c=d=a=null}function p(a){var b;for(b in G)G[b].initialized||-1===G[b].depends.indexOf(a)||q(b)&&p(b)}function q(a){var b,c=G[a],d=c.attach;return C(c.depends)?(c.constructor&&(c.context=c.constructor.apply(c.confs,B(c.depends)),v(c.context)&&(b=G.exports.context,b.hasData()?(c.context={},j(b,c.context),b.clear()):c.context=window[d]||!0),c.initialized=!0),1):!1}function r(a,b){n(null,a,b)}function s(a,b){o(a,b)}function t(a){var b,c,d={};for(b=0;b<a.length;b++)c=a[b],d[a[b]]=/\.js$/.test(c)?c:c+".js";return d}function u(){n("require",[],function(){return function(a){return G[a]?G[a].context:null}}),n("exports",[],function(){function a(){}return a.prototype.clear=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]},a.prototype.hasData=function(){for(var a in this)if(this.hasOwnProperty(a))return!0;return!1},new a}),n("module",[],function(){return{}}),F=null}function v(a){return a===b}function w(a){return null===a}function x(a){return!v(a)&&!w(a)}function y(a){return x(a)&&"string"==typeof a}function z(a){return x(a)&&a.constructor===Array}function A(a){return x(a)&&"function"==typeof a}function B(a){var b,c,d=[];for(b=0;b<a.length;b++)c=G[a[b]],c&&c.context&&d.push(c.context);return d}function C(a){return B(a).length===a.length}var D,E;!function(){var a=document.getElementsByTagName("script"),b=a[a.length-1],c=b.src||location.href;c=c.match(/^([^?#]+)/)[1],D=c.substring(c.lastIndexOf("/")+1),E=D?c.replace(new RegExp("/"+D+".*"),"/"):c}();var F,G={},H=!1,I=1,J={};u();var K=a.dab||{};a.dab=K,K.klass=K.klass||{},K.klass.wicker="factory manufacture carriage config",K.exports||(K.exports=function(b){var c,d,e,f;for(b=b.split(/ /),c=0;c<b.length;c++)if(e=b[c],this.klass[e]){var g=this.klass[e].split(" ");for(d=0;d<g.length;d++)if(f=g[d],-1===f.indexOf("."))a[f]=a[e][f];else{var h=f.split(".");a[h[1]]=a[h[0]][h[1]]}}});var L={};a.wicker=L,L.factory=n,L.manufacture=r,L.carriage=l,L.config=i,a.define=o,a.define.amd={},a.require=s,a.addEventListener("DOMContentLoaded",e,!1)}(this);